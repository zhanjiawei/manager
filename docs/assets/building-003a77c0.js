import{aI as R,f as O,aV as H,aK as K,aW as Q,aX as X,aY as Y,aZ as Z,a_ as j,a3 as u,H as _,I as C,K as q,V as l,z as o,R as y,aQ as G,aR as J,x as p,T as n,S as w,D as x,aS as ee,aT as le,ax as ae,E as oe,aU as te,y as E}from"./index-26c0d00e.js";import{e as de,k as ne,l as r,m as se,n as ie,o as ue}from"./el-table-column-2730de57.js";import{E as re}from"./el-pagination-b76d373a.js";import{E as me,a as ce}from"./el-select-9ef27d39.js";const he=O({data(){return{adCates:[],schools:[],page:{total:1,current:1,size:10},id:null,schoolId:null,result:"",dialogFormVisible:!1,dialogForm:!1,adCate:{chager:0,id:0,name:"",schoolId:0},addpermission:{code:"",createTime:"",deleted:0,description:"",hasChildren:0,id:0,pid:0,type:"",updateTime:"",url:""},formLabelWidth:80}},mounted(){this.getAdCatesPage(1),this.getAllSchool()},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.adCate=de(e)},cancel(){this.dialogFormVisible=!1,this.adCate.chager=0,this.adCate.name=0,this.adCate.schoolId=0,this.adCate.id=0},getAdCatesPage(e){H({current:e,size:5}).then(d=>{console.log(d);const m=d.data.page;this.adCates=m.records,this.page=m}).catch(d=>{console.log(d)})},getAllSchool(){K().then(e=>{console.log(e),this.schools=e.data.schools}).catch(e=>{console.log(e)})},currentchange(e){this.getAdCatesPage(e),this.page.current=e},del(e){console.log(e);const a={id:e};ne.confirm("确定删除该信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log(a),Q(a).then(d=>{if(d.success)this.getAdCatesPage(1),r.success(d.msg);else return console.log(d.msg),r.error(d.msg),!1}).catch(d=>{}),console.log("需要删除的id为："+e)}).catch(()=>{console.log("用户取消了删除操作")})},toAdd(){this.dialogForm=!0},save(){const e=this.adCate;e.id==0?X(e).then(a=>{if(a.success)this.dialogForm=!1,this.adCate.chager=0,this.adCate.id=0,this.adCate.name="",this.adCate.schoolId=0,this.getAdCatesPage(this.page.current),r.success(a.msg);else return r(a.msg),!1}).catch(a=>{r("网络错误联系管理员")}):Y(e).then(a=>{if(a.success)this.dialogFormVisible=!1,this.adCate.chager=0,this.adCate.id=null,this.adCate.name="",this.adCate.schoolId=0,this.getAdCatesPage(this.page.current),r.success(a.msg);else return r(a.msg),!1}).catch(a=>{r("网络错误联系管理员")})},toSearch(e){Z({id:e}).then(d=>{console.log(d.data.building),this.adCates=[],this.adCates.push(d.data.building),this.id=null}).catch(d=>{console.log(d)})},toSearchbyschool(e){const a={schoolId:e,current:1,size:1e4};console.log(a),j(a).then(d=>{console.log(d);const m=d.data.page;this.adCates=m.records,this.page=m,this.page=m}).catch(d=>{console.log(d)})},shuaxin(){this.getAdCatesPage(this.page.current)}}}),pe={style:{"text-align":"center"}},fe={class:"adCates"},ge={class:"adcate-tools",style:{"margin-top":"20px"}},Ce={class:"dialog-footer"},be={class:"dialog-footer"};function Ve(e,a,d,m,_e,ye){const F=u("MapLocation"),s=x,b=ee,V=u("router-link"),U=u("OfficeBuilding"),B=u("School"),L=u("Avatar"),P=le,D=G,T=u("DocumentAdd"),i=ae,f=oe,v=u("Search"),k=ce,I=me,$=u("RefreshLeft"),c=J,g=ue,z=u("EditPen"),W=u("Delete"),M=se,N=re,S=te,A=ie;return p(),_(y,null,[C("h2",pe,"宿舍管理-建筑管理"+q(this.adCates.id),1),C("div",fe,[l(D,null,{default:o(()=>[l(P,{"default-active":e.activeIndex,mode:"horizontal",onSelect:e.handleSelect,style:{"background-color":"#333"},"text-color":"#8f8f8f","active-text-color":"#409eff"},{default:o(()=>[l(V,{to:"/school"},{default:o(()=>[l(b,{style:{"margin-left":"205px"}},{default:o(()=>[l(s,null,{default:o(()=>[l(F)]),_:1}),n("学校管理")]),_:1})]),_:1}),l(V,{to:"/building"},{default:o(()=>[l(b,{style:{"margin-left":"100px"},plain:""},{default:o(()=>[l(s,null,{default:o(()=>[l(U)]),_:1}),n("建筑管理")]),_:1})]),_:1}),l(V,{to:"/dormitory"},{default:o(()=>[l(b,{style:{"margin-left":"100px"},plain:""},{default:o(()=>[l(s,null,{default:o(()=>[l(B)]),_:1}),n("宿舍管理")]),_:1})]),_:1}),l(V,{to:"/dormitory-student"},{default:o(()=>[l(b,{style:{"margin-left":"100px"},plain:""},{default:o(()=>[l(s,null,{default:o(()=>[l(L)]),_:1}),n("住宿管理")]),_:1})]),_:1})]),_:1},8,["default-active","onSelect"])]),_:1}),C("div",ge,[l(c,null,{default:o(()=>[l(i,{type:"primary",onClick:e.toAdd,plain:"",style:{"margin-left":"60px"}},{default:o(()=>[l(s,null,{default:o(()=>[l(T)]),_:1}),n("添加数据")]),_:1},8,["onClick"]),l(f,{placeholder:"请输入建筑id",style:{width:"120px","margin-left":"80px"},modelValue:e.id,"onUpdate:modelValue":a[0]||(a[0]=t=>e.id=t)},null,8,["modelValue"]),l(i,{icon:e.Search,circle:"",style:{"margin-left":"10px"},onClick:a[1]||(a[1]=t=>e.toSearch(this.id))},{default:o(()=>[l(s,null,{default:o(()=>[l(v)]),_:1})]),_:1},8,["icon"]),l(I,{modelValue:e.schoolId,"onUpdate:modelValue":a[3]||(a[3]=t=>e.schoolId=t),placeholder:"请选择学校",style:{"margin-left":"80px"}},{default:o(()=>[(p(!0),_(y,null,w(e.schools,t=>(p(),E(k,{key:t.id,label:t.schoolName,value:t.id,modelValue:e.schoolId,"onUpdate:modelValue":a[2]||(a[2]=h=>e.schoolId=h)},null,8,["label","value","modelValue"]))),128))]),_:1},8,["modelValue"]),l(i,{icon:e.Search,circle:"",style:{"margin-left":"10px"},onClick:a[4]||(a[4]=t=>e.toSearchbyschool(this.schoolId))},{default:o(()=>[l(s,null,{default:o(()=>[l(v)]),_:1})]),_:1},8,["icon"]),l(i,{type:"primary",onClick:e.shuaxin,plain:"",style:{"margin-left":"60px"}},{default:o(()=>[l(s,null,{default:o(()=>[l($)]),_:1}),n("刷新页面")]),_:1},8,["onClick"])]),_:1})]),l(M,{data:e.adCates,style:{width:"100%"}},{default:o(()=>[l(g,{fixed:"",prop:"id",label:"id",width:"180"}),l(g,{prop:"chager",label:"楼管",width:"270"}),l(g,{prop:"name",label:"楼栋名",width:"270"}),l(g,{prop:"schoolId",label:"所属校园编号（schoolid）",width:"270"}),l(g,{fixed:"right",label:"操作",width:"220"},{default:o(t=>[l(i,{type:"primary",onClick:h=>e.toEdit(t.row),plain:""},{default:o(()=>[l(s,null,{default:o(()=>[l(z)]),_:1}),n("修改")]),_:2},1032,["onClick"]),l(i,{type:"danger",onClick:h=>e.del(t.row.id),plain:""},{default:o(()=>[l(s,null,{default:o(()=>[l(W)]),_:1}),n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(N,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),l(A,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[9]||(a[9]=t=>e.dialogFormVisible=t),title:"建筑信息编辑","show-close":!1,"close-on-click-modal":!1},{footer:o(()=>[C("span",Ce,[l(i,{onClick:e.cancel},{default:o(()=>[n("Cancel")]),_:1},8,["onClick"]),l(i,{type:"primary",onClick:e.save},{default:o(()=>[n(" 保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[l(S,{model:e.adCate},{default:o(()=>[l(c,{label:"楼管","label-width":e.formLabelWidth},{default:o(()=>[l(f,{modelValue:e.adCate.chager,"onUpdate:modelValue":a[5]||(a[5]=t=>e.adCate.chager=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(c,{label:"所属学校","label-width":e.formLabelWidth},{default:o(()=>[l(I,{modelValue:e.adCate.schoolId,"onUpdate:modelValue":a[7]||(a[7]=t=>e.adCate.schoolId=t),placeholder:"请选择学校"},{default:o(()=>[(p(!0),_(y,null,w(e.schools,t=>(p(),E(k,{key:t.id,label:t.schoolName,value:t.id,modelValue:e.schoolId,"onUpdate:modelValue":a[6]||(a[6]=h=>e.schoolId=h)},null,8,["label","value","modelValue"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(c,{label:"楼栋名","label-width":e.formLabelWidth},{default:o(()=>[l(f,{modelValue:e.adCate.name,"onUpdate:modelValue":a[8]||(a[8]=t=>e.adCate.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(A,{modelValue:e.dialogForm,"onUpdate:modelValue":a[15]||(a[15]=t=>e.dialogForm=t),title:"建筑添加","show-close":!1,"close-on-click-modal":!1},{footer:o(()=>[C("span",be,[l(i,{onClick:a[14]||(a[14]=t=>e.dialogForm=!1)},{default:o(()=>[n("取消")]),_:1}),l(i,{type:"primary",onClick:e.save},{default:o(()=>[n(" 保存 ")]),_:1},8,["onClick"])])]),default:o(()=>[l(S,{model:e.adCate},{default:o(()=>[l(c,{label:"楼管","label-width":e.formLabelWidth},{default:o(()=>[l(f,{modelValue:e.adCate.chager,"onUpdate:modelValue":a[10]||(a[10]=t=>e.adCate.chager=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(c,{label:"所属学校","label-width":e.formLabelWidth},{default:o(()=>[l(I,{modelValue:e.adCate.schoolId,"onUpdate:modelValue":a[12]||(a[12]=t=>e.adCate.schoolId=t),placeholder:"请选择学校"},{default:o(()=>[(p(!0),_(y,null,w(e.schools,t=>(p(),E(k,{key:t.id,label:t.schoolName,value:t.id,modelValue:e.schoolId,"onUpdate:modelValue":a[11]||(a[11]=h=>e.schoolId=h)},null,8,["label","value","modelValue"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),l(c,{label:"楼栋名","label-width":e.formLabelWidth},{default:o(()=>[l(f,{modelValue:e.adCate.name,"onUpdate:modelValue":a[13]||(a[13]=t=>e.adCate.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const ve=R(he,[["render",Ve]]);export{ve as default};
